!function(t){function e(e,n){function o(t,e){if(t.length&&p(t)){var n=t.panel("options");t.panel("resize",{width:h.width(),height:n.height});var o=t.panel("panel").outerHeight();t.panel("move",{left:0,top:"n"==e?0:h.height()-o}),d.height-=o,"n"==e&&(d.top+=o,!n.split&&n.border&&d.top--),!n.split&&n.border&&d.height++}}function a(t,e){if(t.length&&p(t)){var n=t.panel("options");t.panel("resize",{width:n.width,height:d.height});var o=t.panel("panel").outerWidth();t.panel("move",{left:"e"==e?h.width()-o:0,top:d.top}),d.width-=o,"w"==e&&(d.left+=o,!n.split&&n.border&&d.left--),!n.split&&n.border&&d.width++}}var i=t.data(e,"layout"),l=i.options,s=i.panels,h=t(e);n&&t.extend(l,{width:n.width,height:n.height}),"body"==e.tagName.toLowerCase()?h._size("fit"):h._size(l);var d={top:0,left:0,width:h.width(),height:h.height()};o(p(s.expandNorth)?s.expandNorth:s.north,"n"),o(p(s.expandSouth)?s.expandSouth:s.south,"s"),a(p(s.expandEast)?s.expandEast:s.east,"e"),a(p(s.expandWest)?s.expandWest:s.west,"w"),s.center.panel("resize",d)}function n(n){function a(e){var a=e.layout("options"),i=a.onAdd;a.onAdd=function(){},e.children("div").each(function(){var e=t.fn.layout.parsePanelOptions(this);"north,south,east,west,center".indexOf(e.region)>=0&&o(n,e,this)}),a.onAdd=i}var i=t(n);i.addClass("layout"),a(i.children("form").length?i.children("form"):i),i.append('<div class="layout-split-proxy-h"></div><div class="layout-split-proxy-v"></div>'),i.bind("_resize",function(o,a){return(t(this).hasClass("easyui-fluid")||a)&&e(n),!1})}function o(n,o,a){o.region=o.region||"center";var l=t.data(n,"layout").panels,p=t(n),s=o.region;if(!l[s].length){var h=t(a);h.length||(h=t("<div></div>").appendTo(p));var r=t.extend({},t.fn.layout.paneldefaults,{width:h.length?parseInt(h[0].style.width)||h.outerWidth():"auto",height:h.length?parseInt(h[0].style.height)||h.outerHeight():"auto",doSize:!1,collapsible:!0,onOpen:function(){var e=t(this).panel("header").children("div.panel-tool");e.children("a.panel-tool-collapse").hide();var o={north:"up",south:"down",east:"right",west:"left"};if(o[s]){var a="layout-button-"+o[s],l=e.children("a."+a);l.length||(l=t('<a href="javascript:void(0)"></a>').addClass(a).appendTo(e),l.bind("click",{dir:s},function(t){return i(n,t.data.dir),!1})),t(this).panel("options").collapsible?l.show():l.hide()}}},o,{cls:(o.cls||"")+" layout-panel layout-panel-"+s,bodyCls:(o.bodyCls||"")+" layout-body"});h.panel(r),l[s]=h;var u={north:"s",south:"n",east:"w",west:"e"},c=h.panel("panel");h.panel("options").split&&c.addClass("layout-split-"+s),c.resizable(t.extend({},{handles:u[s]||"",disabled:!h.panel("options").split,onStartResize:function(e){if(d=!0,"north"==s||"south"==s)var o=t(">div.layout-split-proxy-v",n);else var o=t(">div.layout-split-proxy-h",n);var a={display:"block"};"north"==s?(a.top=parseInt(c.css("top"))+c.outerHeight()-o.height(),a.left=parseInt(c.css("left")),a.width=c.outerWidth(),a.height=o.height()):"south"==s?(a.top=parseInt(c.css("top")),a.left=parseInt(c.css("left")),a.width=c.outerWidth(),a.height=o.height()):"east"==s?(a.top=parseInt(c.css("top"))||0,a.left=parseInt(c.css("left"))||0,a.width=o.width(),a.height=c.outerHeight()):"west"==s&&(a.top=parseInt(c.css("top"))||0,a.left=c.outerWidth()-o.width(),a.width=o.width(),a.height=c.outerHeight()),o.css(a),t('<div class="layout-mask"></div>').css({left:0,top:0,width:p.width(),height:p.height()}).appendTo(p)},onResize:function(e){if("north"==s||"south"==s){var o=t(">div.layout-split-proxy-v",n);o.css("top",e.pageY-t(n).offset().top-o.height()/2)}else{var o=t(">div.layout-split-proxy-h",n);o.css("left",e.pageX-t(n).offset().left-o.width()/2)}return!1},onStopResize:function(t){p.children("div.layout-split-proxy-v,div.layout-split-proxy-h").hide(),h.panel("resize",t.data),e(n),d=!1,p.find(">div.layout-mask").remove()}},o)),p.layout("options").onAdd.call(n,s)}}function a(e,n){var o=t.data(e,"layout").panels;if(o[n].length){o[n].panel("destroy"),o[n]=t();var a="expand"+n.substring(0,1).toUpperCase()+n.substring(1);o[a]&&(o[a].panel("destroy"),o[a]=void 0),t(e).layout("options").onRemove.call(e,n)}}function i(e,n,o){function a(o){var a={east:"left",west:"right",north:"down",south:"up"},i="north"==u.region||"south"==u.region,p="layout-button-"+a[o],s=t("<div></div>").appendTo(e);if(s.panel(t.extend({},t.fn.layout.paneldefaults,{cls:"layout-expand layout-expand-"+o,title:"&nbsp;",iconCls:u.hideCollapsedContent?null:u.iconCls,closed:!0,minWidth:0,minHeight:0,doSize:!1,region:u.region,collapsedSize:u.collapsedSize,noheader:!i&&u.hideExpandTool,tools:i&&u.hideExpandTool?null:[{iconCls:p,handler:function(){return l(e,n),!1}}]})),!u.hideCollapsedContent){var h="function"==typeof u.collapsedContent?u.collapsedContent.call(s[0],u.title):u.collapsedContent;i?s.panel("setTitle",h):s.html(h)}return s.panel("panel").hover(function(){t(this).addClass("layout-expand-over")},function(){t(this).removeClass("layout-expand-over")}),s}function s(){var o=t(e),a=h.center.panel("options"),i=u.collapsedSize;if("east"==n){var l=r.panel("panel")._outerWidth(),s=a.width+l-i;return!u.split&&u.border||s++,{resizeC:{width:s},expand:{left:o.width()-l},expandP:{top:a.top,left:o.width()-i,width:i,height:a.height},collapse:{left:o.width(),top:a.top,height:a.height}}}if("west"==n){var l=r.panel("panel")._outerWidth(),s=a.width+l-i;return!u.split&&u.border||s++,{resizeC:{width:s,left:i-1},expand:{left:0},expandP:{left:0,top:a.top,width:i,height:a.height},collapse:{left:-l,top:a.top,height:a.height}}}if("north"==n){var d=r.panel("panel")._outerHeight(),c=a.height;return p(h.expandNorth)||(c+=d-i+(u.split||!u.border?1:0)),h.east.add(h.west).add(h.expandEast).add(h.expandWest).panel("resize",{top:i-1,height:c}),{resizeC:{top:i-1,height:c},expand:{top:0},expandP:{top:0,left:0,width:o.width(),height:i},collapse:{top:-d,width:o.width()}}}if("south"==n){var d=r.panel("panel")._outerHeight(),c=a.height;return p(h.expandSouth)||(c+=d-i+(u.split||!u.border?1:0)),h.east.add(h.west).add(h.expandEast).add(h.expandWest).panel("resize",{height:c}),{resizeC:{height:c},expand:{top:o.height()-d},expandP:{top:o.height()-i,left:0,width:o.width(),height:i},collapse:{top:o.height(),width:o.width()}}}}void 0==o&&(o="normal");var h=t.data(e,"layout").panels,r=h[n],u=r.panel("options");if(0!=u.onBeforeCollapse.call(r)){var c="expand"+n.substring(0,1).toUpperCase()+n.substring(1);if(!h[c]){h[c]=a(n);var f=h[c].panel("panel");u.expandMode?f.bind("click",function(){if("dock"==u.expandMode)l(e,n);else{r.panel("expand",!1).panel("open");var o=s();r.panel("resize",o.collapse),r.panel("panel").animate(o.expand,function(){t(this).unbind(".layout").bind("mouseleave.layout",{region:n},function(n){1!=d&&(t("body>div.combo-p>div.combo-panel:visible").length||i(e,n.data.region))}),t(e).layout("options").onExpand.call(e,n)})}return!1}):f.css("cursor","default")}var g=s();p(h[c])||h.center.panel("resize",g.resizeC),r.panel("panel").animate(g.collapse,o,function(){r.panel("collapse",!1).panel("close"),h[c].panel("open").panel("resize",g.expandP),t(this).unbind(".layout"),t(e).layout("options").onCollapse.call(e,n)})}}function l(n,o){function a(){var e=t(n),a=i.center.panel("options");return"east"==o&&i.expandEast?{collapse:{left:e.width(),top:a.top,height:a.height},expand:{left:e.width()-l.panel("panel")._outerWidth()}}:"west"==o&&i.expandWest?{collapse:{left:-l.panel("panel")._outerWidth(),top:a.top,height:a.height},expand:{left:0}}:"north"==o&&i.expandNorth?{collapse:{top:-l.panel("panel")._outerHeight(),width:e.width()},expand:{top:0}}:"south"==o&&i.expandSouth?{collapse:{top:e.height(),width:e.width()},expand:{top:e.height()-l.panel("panel")._outerHeight()}}:void 0}var i=t.data(n,"layout").panels,l=i[o],p=l.panel("options");if(0!=p.onBeforeExpand.call(l)){var s="expand"+o.substring(0,1).toUpperCase()+o.substring(1);if(i[s]){i[s].panel("close"),l.panel("panel").stop(!0,!0),l.panel("expand",!1).panel("open");var h=a();l.panel("resize",h.collapse),l.panel("panel").animate(h.expand,function(){e(n),t(n).layout("options").onExpand.call(n,o)})}}}function p(t){return!!t&&(!!t.length&&t.panel("panel").is(":visible"))}function s(e){function n(t){var n=l[t];n.length&&n.panel("options").collapsed&&i(e,t,0)}var o=t.data(e,"layout"),a=o.options,l=o.panels,p=a.onCollapse;a.onCollapse=function(){},n("east"),n("west"),n("north"),n("south"),a.onCollapse=p}function h(n,o,a){var i=t(n).layout("panel",o);i.panel("options").split=a;var l="layout-split-"+o,p=i.panel("panel").removeClass(l);a&&p.addClass(l),p.resizable({disabled:!a}),e(n)}var d=!1;t.fn.layout=function(o,a){return"string"==typeof o?t.fn.layout.methods[o](this,a):(o=o||{},this.each(function(){var a=t.data(this,"layout");if(a)t.extend(a.options,o);else{var i=t.extend({},t.fn.layout.defaults,t.fn.layout.parseOptions(this),o);t.data(this,"layout",{options:i,panels:{center:t(),north:t(),south:t(),east:t(),west:t()}}),n(this)}e(this),s(this)}))},t.fn.layout.methods={options:function(e){return t.data(e[0],"layout").options},resize:function(t,n){return t.each(function(){e(this,n)})},panel:function(e,n){return t.data(e[0],"layout").panels[n]},collapse:function(t,e){return t.each(function(){i(this,e)})},expand:function(t,e){return t.each(function(){l(this,e)})},add:function(n,a){return n.each(function(){o(this,a),e(this),t(this).layout("panel",a.region).panel("options").collapsed&&i(this,a.region,0)})},remove:function(t,n){return t.each(function(){a(this,n),e(this)})},split:function(t,e){return t.each(function(){h(this,e,!0)})},unsplit:function(t,e){return t.each(function(){h(this,e,!1)})}},t.fn.layout.parseOptions=function(e){return t.extend({},t.parser.parseOptions(e,[{fit:"boolean"}]))},t.fn.layout.defaults={fit:!1,onExpand:function(t){},onCollapse:function(t){},onAdd:function(t){},onRemove:function(t){}},t.fn.layout.parsePanelOptions=function(e){t(e);return t.extend({},t.fn.panel.parseOptions(e),t.parser.parseOptions(e,["region",{split:"boolean",collpasedSize:"number",minWidth:"number",minHeight:"number",maxWidth:"number",maxHeight:"number"}]))},t.fn.layout.paneldefaults=t.extend({},t.fn.panel.defaults,{region:null,split:!1,collapsedSize:28,expandMode:"float",hideExpandTool:!1,hideCollapsedContent:!0,collapsedContent:function(e){var n=t(this),o=n.panel("options");if("north"==o.region||"south"==o.region)return e;var a=o.collapsedSize-2,i=(a-16)/2;i=a-i;var l=[];return o.iconCls&&l.push('<div class="panel-icon '+o.iconCls+'"></div>'),l.push('<div class="panel-title layout-expand-title'),l.push(o.iconCls?" layout-expand-with-icon":""),l.push('" style="left:'+i+'px">'),l.push(e),l.push("</div>"),l.join("")},minWidth:10,minHeight:10,maxWidth:1e4,maxHeight:1e4})}(jQuery);