!function(o){function n(n,e){var t=o.data(n,"window");e&&(null!=e.left&&(t.options.left=e.left),null!=e.top&&(t.options.top=e.top)),o(n).panel("move",t.options),t.shadow&&t.shadow.css({left:t.options.left,top:t.options.top})}function e(e,t){var i=o.data(e,"window").options,d=o(e).window("panel"),a=d._outerWidth();if(i.inline){var s=d.parent();i.left=Math.ceil((s.width()-a)/2+s.scrollLeft())}else i.left=Math.ceil((o(window)._outerWidth()-a)/2+o(document).scrollLeft());t&&n(e)}function t(e,t){var i=o.data(e,"window").options,d=o(e).window("panel"),a=d._outerHeight();if(i.inline){var s=d.parent();i.top=Math.ceil((s.height()-a)/2+s.scrollTop())}else i.top=Math.ceil((o(window)._outerHeight()-a)/2+o(document).scrollTop());t&&n(e)}function i(i){var d=o.data(i,"window"),a=d.options,s=o(i).panel(o.extend({},d.options,{border:!1,doSize:!0,closed:!0,cls:"window "+(a.border?"thin"==a.border?"window-thinborder ":"":"window-thinborder window-noborder ")+(a.cls||""),headerCls:"window-header "+(a.headerCls||""),bodyCls:"window-body "+(a.noheader?"window-body-noheader ":" ")+(a.bodyCls||""),onBeforeDestroy:function(){return 0!=a.onBeforeDestroy.call(i)&&(d.shadow&&d.shadow.remove(),void(d.mask&&d.mask.remove()))},onClose:function(){d.shadow&&d.shadow.hide(),d.mask&&d.mask.hide(),a.onClose.call(i)},onOpen:function(){d.mask&&d.mask.css(o.extend({display:"block",zIndex:o.fn.window.defaults.zIndex++},o.fn.window.getMaskSize(i))),d.shadow&&d.shadow.css({display:"block",zIndex:o.fn.window.defaults.zIndex++,left:a.left,top:a.top,width:d.window._outerWidth(),height:d.window._outerHeight()}),d.window.css("z-index",o.fn.window.defaults.zIndex++),a.onOpen.call(i)},onResize:function(n,e){var t=o(this).panel("options");o.extend(a,{width:t.width,height:t.height,left:t.left,top:t.top}),d.shadow&&d.shadow.css({left:a.left,top:a.top,width:d.window._outerWidth(),height:d.window._outerHeight()}),a.onResize.call(i,n,e)},onMinimize:function(){d.shadow&&d.shadow.hide(),d.mask&&d.mask.hide(),d.options.onMinimize.call(i)},onBeforeCollapse:function(){return 0!=a.onBeforeCollapse.call(i)&&void(d.shadow&&d.shadow.hide())},onExpand:function(){d.shadow&&d.shadow.show(),a.onExpand.call(i)}}));d.window=s.panel("panel"),d.mask&&d.mask.remove(),a.modal&&(d.mask=o('<div class="window-mask" style="display:none"></div>').insertAfter(d.window)),d.shadow&&d.shadow.remove(),a.shadow&&(d.shadow=o('<div class="window-shadow" style="display:none"></div>').insertAfter(d.window));var w=a.closed;null==a.left&&e(i),null==a.top&&t(i),n(i),w||s.window("open")}function d(n){var e=o.data(n,"window");e.window.draggable({handle:">div.panel-header>div.panel-title",disabled:0==e.options.draggable,onBeforeDrag:function(n){e.mask&&e.mask.css("z-index",o.fn.window.defaults.zIndex++),e.shadow&&e.shadow.css("z-index",o.fn.window.defaults.zIndex++),e.window.css("z-index",o.fn.window.defaults.zIndex++)},onStartDrag:function(n){e.proxy||(e.proxy=o('<div class="window-proxy"></div>').insertAfter(e.window)),e.proxy.css({display:"none",zIndex:o.fn.window.defaults.zIndex++,left:n.data.left,top:n.data.top}),e.proxy._outerWidth(e.window._outerWidth()),e.proxy._outerHeight(e.window._outerHeight()),setTimeout(function(){e.proxy&&e.proxy.show()},500)},onDrag:function(o){return e.proxy.css({display:"block",left:o.data.left,top:o.data.top}),!1},onStopDrag:function(t){e.options.left=t.data.left,e.options.top=t.data.top,o(n).window("move"),e.proxy.remove(),e.proxy=null}}),e.window.resizable({disabled:0==e.options.resizable,onStartResize:function(n){e.pmask&&e.pmask.remove(),e.pmask=o('<div class="window-proxy-mask"></div>').insertAfter(e.window),e.pmask.css({zIndex:o.fn.window.defaults.zIndex++,left:n.data.left,top:n.data.top,width:e.window._outerWidth(),height:e.window._outerHeight()}),e.proxy&&e.proxy.remove(),e.proxy=o('<div class="window-proxy"></div>').insertAfter(e.window),e.proxy.css({zIndex:o.fn.window.defaults.zIndex++,left:n.data.left,top:n.data.top}),e.proxy._outerWidth(n.data.width)._outerHeight(n.data.height)},onResize:function(o){return e.proxy.css({left:o.data.left,top:o.data.top}),e.proxy._outerWidth(o.data.width),e.proxy._outerHeight(o.data.height),!1},onStopResize:function(t){o(n).window("resize",t.data),e.pmask.remove(),e.pmask=null,e.proxy.remove(),e.proxy=null}})}o(window).resize(function(){o("body>div.window-mask").css({width:o(window)._outerWidth(),height:o(window)._outerHeight()}),setTimeout(function(){o("body>div.window-mask").css(o.fn.window.getMaskSize())},50)}),o.fn.window=function(n,e){if("string"==typeof n){var t=o.fn.window.methods[n];return t?t(this,e):this.panel(n,e)}return n=n||{},this.each(function(){var e=o.data(this,"window");e?o.extend(e.options,n):(e=o.data(this,"window",{options:o.extend({},o.fn.window.defaults,o.fn.window.parseOptions(this),n)}),e.options.inline||document.body.appendChild(this)),i(this),d(this)})},o.fn.window.methods={options:function(n){var e=n.panel("options"),t=o.data(n[0],"window").options;return o.extend(t,{closed:e.closed,collapsed:e.collapsed,minimized:e.minimized,maximized:e.maximized})},window:function(n){return o.data(n[0],"window").window},move:function(o,e){return o.each(function(){n(this,e)})},hcenter:function(o){return o.each(function(){e(this,!0)})},vcenter:function(o){return o.each(function(){t(this,!0)})},center:function(o){return o.each(function(){e(this),t(this),n(this)})}},o.fn.window.getMaskSize=function(n){var e=o(n).data("window"),t=e&&e.options.inline;return{width:t?"100%":o(document).width(),height:t?"100%":o(document).height()}},o.fn.window.parseOptions=function(n){return o.extend({},o.fn.panel.parseOptions(n),o.parser.parseOptions(n,[{draggable:"boolean",resizable:"boolean",shadow:"boolean",modal:"boolean",inline:"boolean"}]))},o.fn.window.defaults=o.extend({},o.fn.panel.defaults,{zIndex:9e3,draggable:!0,resizable:!0,shadow:!0,modal:!1,border:!0,inline:!1,title:"New Window",collapsible:!0,minimizable:!0,maximizable:!0,closable:!0,closed:!1})}(jQuery);