!function(t){function e(e){var a=t.data(e,"filebox"),l=a.options;l.fileboxId="filebox_file_id_"+ ++i,t(e).addClass("filebox-f").textbox(l),t(e).textbox("textbox").attr("readonly","readonly"),a.filebox=t(e).next().addClass("filebox");var n=o(e),r=t(e).filebox("button");r.length&&(t('<label class="filebox-label" for="'+l.fileboxId+'"></label>').appendTo(r),r.linkbutton("options").disabled?n.attr("disabled","disabled"):n.removeAttr("disabled"))}function o(e){var o=t.data(e,"filebox"),i=o.options;o.filebox.find(".textbox-value").remove(),i.oldValue="";var a=t('<input type="file" class="textbox-value">').appendTo(o.filebox);return a.attr("id",i.fileboxId).attr("name",t(e).attr("textboxName")||""),a.attr("accept",i.accept),i.multiple&&a.attr("multiple","multiple"),a.change(function(){var o=this.value;this.files&&(o=t.map(this.files,function(t){return t.name}).join(i.separator)),t(e).filebox("setText",o),i.onChange.call(e,o,i.oldValue),i.oldValue=o}),a}var i=0;t.fn.filebox=function(o,i){if("string"==typeof o){var a=t.fn.filebox.methods[o];return a?a(this,i):this.textbox(o,i)}return o=o||{},this.each(function(){var i=t.data(this,"filebox");i?t.extend(i.options,o):t.data(this,"filebox",{options:t.extend({},t.fn.filebox.defaults,t.fn.filebox.parseOptions(this),o)}),e(this)})},t.fn.filebox.methods={options:function(e){var o=e.textbox("options");return t.extend(t.data(e[0],"filebox").options,{width:o.width,value:o.value,originalValue:o.originalValue,disabled:o.disabled,readonly:o.readonly})},clear:function(e){return e.each(function(){t(this).textbox("clear"),o(this)})},reset:function(e){return e.each(function(){t(this).filebox("clear")})}},t.fn.filebox.parseOptions=function(e){var o=t(e);return t.extend({},t.fn.textbox.parseOptions(e),t.parser.parseOptions(e,["accept","separator"]),{multiple:!!o.attr("multiple")||void 0})},t.fn.filebox.defaults=t.extend({},t.fn.textbox.defaults,{buttonIcon:null,buttonText:"Choose File",buttonAlign:"right",inputEvents:{},accept:"",separator:",",multiple:!1})}(jQuery);